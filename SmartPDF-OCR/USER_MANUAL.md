# SmartPDF-OCR 使用说明书 (桌面版)

SmartPDF-OCR 是一款基于深度学习的智能 PDF 文字识别工具，能够自动识别图片型 PDF、扫描件，并转换为可编辑的 TXT、Word 或 Markdown 文档。

---

## 🏗️ 安装指南

本软件已打包为绿色版应用程序，支持 Windows 系统。

### 1. 获取软件
请找到生成的安装包文件（通常为 `SmartPDF-OCR Setup 1.0.0.exe`）或解压绿色版压缩包。

### 2. 安装/运行
*   **安装版**：双击 `.exe` 安装程序，按照提示完成安装。安装完成后，桌面会出现 `SmartPDF-OCR` 图标。
*   **便携版**：直接运行解压目录下的 `SmartPDF-OCR.exe`。

### 3. 环境检测 (首次启动)
软件内置了智能环境检测功能：
*   **高性能模式**：如果您的电脑配有 NVIDIA 显卡并安装了驱动，软件会自动启用 **GPU 加速 + TensorRT**，识别速度极快。
*   **兼容模式**：如果没有检测到显卡，软件会自动降级为 **CPU 模式**。此时识别速度会稍慢，但功能完全正常。

> **注意**：首次启动时，OCR 引擎需要进行一次快速预热（Warm-up），大概耗时 3-5 秒，请耐心等待。

---

## 📖 使用教程

### ⚡ 核心功能流程

#### 第一步：上传文件
1.  点击左侧的 **"选择文件"** 按钮，或者直接将 PDF 文件拖入虚线框区域。
2.  软件会自动开始分析 PDF 结构（检测是纯文字还是扫描图片）。

#### 第二步：配置选项 (可选)
在右侧面板中，您可以根据需要调整设置：
*   **预处理**：默认开启。包含去噪、倾斜校正，能显著提高识别准确率。
*   **识别范围**：可以指定页码（如 `1-5, 8`），默认识别全部页面。
*   **OCR 引擎**：软件内置工业级 PaddleOCR 模型，无需手动选择。

#### 第三步：AI 语义优化 (推荐) 🔥
如果是排版混乱的文档，建议开启此功能：
1.  在右下角 **"AI 语义优化"** 区域，选择模型（如 **Gemini 2.0 Flash**）。
2.  (可选) 输入您的 API Key。
3.  AI 会自动修复识别出来的错别字、重建段落结构，并生成精美的 Markdown 格式。

#### 第四步：开始识别
点击中间的 **"开始识别"** 按钮。
*   下方进度条会实时显示处理进度。
*   预览窗口会即时显示识别出来的文字结果。

#### 第五步：导出结果
处理完成后，点击左下角的导出按钮。
*   **TXT**：纯文本格式。
*   **Word (.docx)**：保留格式的文档。
*   **Markdown (.md)**：适合笔记软件的格式 (推荐配合 AI 优化使用)。
*   **可搜索 PDF**：双层 PDF，保留原图但可复制文字。

---

## ❓ 常见问题

**Q: 打开软件报错 "Python backend not found"？**
A: 这通常是因为杀毒软件误删了内置的 OCR 引擎文件。请将安装目录添加至白名单，或尝试重新安装。

**Q: 识别速度很慢？**
A: 请检查是否开启了 CPU 模式。如果是图片非常多的高清扫描件，CPU 模式下每页耗时约 2-5 秒属于正常现象。

**Q: 历史记录在哪里？**
A: 右侧边栏有 "历史任务" 列表。您的数据默认保存在本地用户目录 (`%LOCALAPPDATA%\SmartPDF-OCR`)，不会上传到任何云端服务器（除非调用 AI API）。

---

## 🔧 给开发者的构建指南

如果您手头有源码，想自己打包新版本：

1.  **构建后端**：
    ```powershell
    # 确保当前在项目根目录
    pip install -r requirements.txt
    pip install pyinstaller
    pyinstaller ocr_engine.spec --clean
    ```

2.  **构建前端与打包**：
    ```powershell
    cd frontend
    npm install
    npm run build
    npm run dist
    ```
3.  最终产物将在 `frontend/dist-electron` 目录下。
